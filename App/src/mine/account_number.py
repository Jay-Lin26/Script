# coding = GBKfrom App.common.apk import *from App.common.element import *from App.common.utils import random_phone_numberfrom Libs.chrome.android_driver import AndroidOptionsfrom Libs.database import DataBase"""    用例名称： 账号操作    1、检查是否登录，如果已经登陆则退出之后 进行注册\登录操作    2、检查是否登录，如果未登陆 直接进行注册\登录操作"""haitao_v2_pre = DataBase('haitao_v2_pre')haitao = AndroidOptions(HUAWEI_DEVICE_INFO)haitao.by_id_click(Mine.MINE["id"])result = haitao.check_elements(Mine.PENDING["text"], attribute='text')# 登入def login():    haitao.by_id_click(Mine.LOGIN_REGISTER["id"])    haitao.by_id_click(Entry.ACCOUNT_LOGIN["id"])    haitao.by_text_input(Entry.USERNAME["text"], content='13264666760')    haitao.by_text_input(Entry.PASSWORD["text"], content='admin321')    haitao.by_id_click(Entry.LOGIN_SUB["id"])    haitao.slide_verification()    haitao.by_id_click(Forum.FORUM["id"])    haitao.by_id_click(Cate.CATE["id"])    haitao.by_id_click(Deal.DEAL["id"])    haitao.page_slide("up")# 登出def logoff():    haitao.by_id_click(Mine.SETTING["id"])    haitao.page_slide("up")    haitao.by_id_click(Mine.LOGOUT["id"])    haitao.by_id_click(Mine.LOGOUT_Y["id"])# 注册def reg():    phone_number = random_phone_number()    haitao.by_id_click(Mine.LOGIN_REGISTER["id"])    haitao.by_text_input(Entry.MOBILE["text"], phone_number)    haitao.by_text_click(Entry.SEND_VERIFICATION_CODE["text"])    haitao.slide_verification()    SQL = "select `code` from mobile_verify where `mobile` = '%s' order by `id` desc limit 1 " % phone_number    code = haitao_v2_pre.select(SQL)[0][0]    haitao.by_text_input(Entry.VERIFICATION_CODE["text"], code)    haitao.by_text_click(Entry.LOGIN_SUB["text"])    haitao.by_text_click(Entry.INVITE_CODE_NO["text"])    haitao.by_text_click(Entry.INVITE_CODE_NO["text"])    haitao.by_text_click(Entry.INVITE_CODE_NO["text"])# 更新密码def update_pwd():    phone_number = '13264666760'    haitao.by_id_click(Mine.MINE["id"])    haitao.by_id_click(Mine.SETTING["id"])    haitao.by_text_click(Mine.SETTING_TAB[3])    haitao.by_text_input(Entry.MOBILE["text"], phone_number)    haitao.by_text_click(Entry.SEND_VERIFICATION_CODE["text"])    SQL = "select `code` from mobile_verify where `mobile` = '%s' order by `id` desc limit 1 " % phone_number    code = haitao_v2_pre.select(SQL)[0][0]    haitao.by_text_input(Entry.VERIFICATION_CODE["text"], code)    haitao.by_text_input(Entry.NEW_PASSWORD["text"], "admin890")    haitao.by_id_click(Entry.RESET_PASSWORD["id"])if __name__ == '__main__':    if result is True:        logoff()        reg()        logoff()        login()    elif result is False:        reg()        logoff()        login()    update_pwd()